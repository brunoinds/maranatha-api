import{d as T,r,B as w,c as n,w as o,u as e,R as A,S as h,o as s,a,b as B,h as L,g as I,i as N,j as u,I as P,l as V,m as c,V as j,s as i,v as l,N as y,F as x,W as M,k as R,y as D}from"./index-32b16346.js";const J=l("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1),q=l("h2",null,"Modificar Jobs",-1),F=l("h2",null,"Modificar Proyectos",-1),z=T({__name:"Account",setup(H){const d=r(null),f=r(!0),_=w(),v=r(null),m=r(!1),g=()=>{_.replace("/login")},k=()=>{_.push("/jobs")},C=()=>{_.push("/projects")},b=async()=>{d.value=await A.get("/account/me"),f.value=!1;const t=await h.getCurrentSession();t&&(m.value=t.roles().includes("admin"))},S=async()=>{h.getCurrentSession().then(async t=>{t||g(),t.logout().then(()=>{g()}).catch(p=>{console.error(p)})})};return b(),(t,p)=>(s(),n(e(D),{ref_key:"page",ref:v},{default:o(()=>[a(e(P),null,{default:o(()=>[a(e(B),null,{default:o(()=>[a(e(L),null,{default:o(()=>[I("Mi cuenta")]),_:1}),f.value?(s(),n(e(N),{key:0,type:"indeterminate"})):u("",!0)]),_:1})]),_:1}),a(e(R),null,{default:o(()=>[f.value?u("",!0):(s(),n(e(V),{key:0},{default:o(()=>[a(e(c),null,{default:o(()=>[a(e(j),{slot:"start"},{default:o(()=>[J]),_:1}),a(e(i),null,{default:o(()=>[l("h2",null,y(d.value.name),1),l("p",null,y(d.value.email),1)]),_:1})]),_:1}),m.value?(s(),n(e(c),{key:0,onClick:k,button:""},{default:o(()=>[a(e(i),{color:"primary"},{default:o(()=>[q]),_:1})]),_:1})):u("",!0),m.value?(s(),n(e(c),{key:1,onClick:C,button:""},{default:o(()=>[a(e(i),{color:"primary"},{default:o(()=>[F]),_:1})]),_:1})):u("",!0),a(e(c),{onClick:S},{default:o(()=>[a(e(x),{color:"danger",icon:e(M),slot:"start"},null,8,["icon"]),a(e(i),{color:"danger"},{default:o(()=>[I("Terminar sesiÃ³n")]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1},512))}});export{z as default};
