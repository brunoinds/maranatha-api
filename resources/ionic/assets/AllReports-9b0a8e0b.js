import{d as L,r as _,B as E,C as O,c as i,w as a,u as t,R as N,o as u,a as s,b as P,h as R,g as f,i as x,j as p,I as F,T as G,H as y,L as k,K as g,k as U,y as V,U as $,m as h,s as c,v as n,N as r,l as w,O as v,F as D,P as j,Q as H}from"./index-1391b99f.js";import{D as d}from"./datetime-49c8e94e.js";const M={slot:"content"},J=L({__name:"AllReports",setup(q){const m=_([]),I=_(!0),A=E(),B=_(null),C=O(()=>{const o=m.value.reduce((l,e)=>(l[e.user_id]||(l[e.user_id]=[]),l[e.user_id].push(e),l),{});return Object.keys(o).map(l=>({user:o[l][0].user,reports:o[l].map(e=>({...e,reportType:e.type=="Bill"?"Boletas":"Facturas",reportStatus:e.status=="Draft"?"Pendiente":"Enviado",reportDates:"".concat(d.fromISO(e.from_date).toLocaleString(d.DATE_MED)," - ").concat(d.fromISO(e.to_date).toLocaleString(d.DATE_MED)),invoices:{total:e.invoices.count,totalAmount:e.invoices.total_amount}}))}))}),S=async()=>{const o=await N.get("/reports");I.value=!1,m.value=o},T=o=>{A.push("/reports/".concat(o))};return S(),(o,b)=>(u(),i(t(V),{ref_key:"page",ref:B},{default:a(()=>[s(t(F),null,{default:a(()=>[s(t(P),null,{default:a(()=>[s(t(R),null,{default:a(()=>[f("Todos los Reportes")]),_:1}),I.value?(u(),i(t(x),{key:0,type:"indeterminate"})):p("",!0)]),_:1})]),_:1}),s(t(U),null,{default:a(()=>[s(t(G),null,{default:a(()=>[(u(!0),y(g,null,k(C.value,l=>(u(),i(t($),{key:l.user.id},{default:a(()=>[s(t(h),{slot:"header",color:"light"},{default:a(()=>[s(t(c),null,{default:a(()=>[n("h2",null,r(l.user.name),1),n("p",null,"@"+r(l.user.username),1)]),_:2},1024)]),_:2},1024),n("section",M,[s(t(w),null,{default:a(()=>[(u(!0),y(g,null,k(l.reports,e=>(u(),i(t(h),{key:e.id,button:"",onClick:K=>T(e.id),detail:!0},{default:a(()=>[s(t(c),null,{default:a(()=>[n("h2",null,[n("b",null,r(e.title),1)]),n("p",null,r(e.reportType),1),n("p",null,r(e.reportDates),1),n("p",null,[n("b",null,"S./ "+r(e.invoices.totalAmount),1)])]),_:2},1024),e.status=="Draft"?(u(),i(t(v),{key:0,color:"danger"},{default:a(()=>[s(t(D),{icon:t(j)},null,8,["icon"]),s(t(c),null,{default:a(()=>[f(r(e.reportStatus),1)]),_:2},1024)]),_:2},1024)):p("",!0),e.status=="Submitted"?(u(),i(t(v),{key:1,color:"success"},{default:a(()=>[s(t(D),{icon:t(H)},null,8,["icon"]),s(t(c),null,{default:a(()=>[f(r(e.reportStatus),1)]),_:2},1024)]),_:2},1024)):p("",!0)]),_:2},1032,["onClick"]))),128))]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},512))}});export{J as default};
