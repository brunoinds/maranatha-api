System.register(["./RequestAPI-legacy-f8dcfb20.js","./index-legacy-4514fca9.js"],(function(e,a){"use strict";var t,l,s,n,r,o,u,i,c,d,m,p,h,f,w,y,v,b,g,x,C,_,D,k,U,N,O,j,K,P,I;return{setters:[e=>{t=e.R},e=>{l=e.d,s=e.r,n=e.c,r=e.w,o=e.u,u=e.o,i=e.a,c=e.b,d=e.e,m=e.Y,p=e.h,h=e.g,f=e.i,w=e.j,y=e.I,v=e.l,b=e.G,g=e.H,x=e.J,C=e.f,_=e.E,D=e.F,k=e.k,U=e.y,N=e.z,O=e.m,j=e.s,K=e.v,P=e.K,I=e.an}],execute:function(){e("default",l({__name:"Users",setup(e){const a=s(!0),l=s([]),R=async()=>{t.get("/users").then((e=>{l.value=e})).catch((e=>{console.log(e)})).finally((()=>{a.value=!1}))},q=async(e=null)=>{const a=await N.create({header:"Nuevo usuário",inputs:[{type:"text",placeholder:"Nombres y apellidos",value:e?e.name:null},{type:"email",placeholder:"Correo electrónico",value:e?e.email:null},{type:"text",placeholder:"Nombre de usuario",value:e?e.username:null},{type:"password",placeholder:"Contraseña",value:e?e.password:null}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Crear Usuário",role:"confirm"}]});await a.present();const{role:l,data:s}=await a.onDidDismiss();if("confirm"==l){const e={name:s.values[0],username:s.values[2],email:s.values[1],password:s.values[3]};t.post("/users",e).then((e=>{N.create({header:"¡Éxito!",message:"Usuário creado correctamente",buttons:["OK"]}).then((async e=>{await e.present(),await e.onDidDismiss(),R()}))})).catch((a=>{N.create({header:"Oops...",message:a.response.message,buttons:["OK"]}).then((async a=>{await a.present(),await a.onDidDismiss(),q(e)}))}))}},z=async e=>{const a=await N.create({header:"Cambiar contraseña",inputs:[{type:"password",placeholder:"Nueva contraseña"}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Cambiar contraseña",role:"confirm"}]});await a.present(),await a.onDidDismiss()};return R(),(e,t)=>(u(),n(o(U),null,{default:r((()=>[i(o(y),null,{default:r((()=>[i(o(c),null,{default:r((()=>[i(o(d),{slot:"start"},{default:r((()=>[i(o(m),{"default-href":"/"})])),_:1}),i(o(p),null,{default:r((()=>[h("Usuários")])),_:1}),a.value?(u(),n(o(f),{key:0,type:"indeterminate"})):w("",!0)])),_:1})])),_:1}),i(o(k),null,{default:r((()=>[i(o(v),null,{default:r((()=>[(u(!0),b(x,null,g(l.value,(e=>(u(),n(o(O),{key:e.id,button:"",onClick:a=>(async e=>{const a=await I.create({header:"Opciones para "+e.name,buttons:[{text:"Borrar usuario",role:"destructive",data:{action:"deleteUser"}},{text:"Cambiar clave",data:{action:"changePassword"}},{text:"Cancelar",role:"cancel",data:{action:"cancel"}}]});await a.present();const{role:t,data:l}=await a.onDidDismiss();console.log(t,l),"changePassword"==l.action&&z()})(e),detail:!0},{default:r((()=>[i(o(j),null,{default:r((()=>[K("h2",null,[K("b",null,P(e.name),1)]),K("h3",null,P(e.email),1),K("p",null,"Usuário: @"+P(e.username),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),i(o(C),{onClick:q},{default:r((()=>[i(o(_),{icon:o(D)},null,8,["icon"]),h(" Nuevo usuario ")])),_:1})])),_:1})])),_:1}))}}))}}}));
