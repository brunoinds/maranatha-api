import{d as b,r as v,B,af as N,c as h,w as o,u as a,R as y,o as d,a as l,b as O,e as C,a6 as K,h as L,g as E,i as V,j as P,F as j,G as R,I as T,l as A,H as F,L as G,K as H,k as S,y as U,z as r,m as $,s as q,v as f,N as x,ax as z,A as J}from"./index-32b16346.js";const W=b({__name:"Projects",setup(M){const _=v([]),m=v(!0);B();const I=v(null),p=async()=>{m.value=!0,_.value=await y.get("/projects"),m.value=!1},w=async(e=null)=>{const s=await r.create({header:"Nuevo Proyecto",inputs:[{type:"text",placeholder:"Name",value:e?e.name:null},{type:"text",placeholder:"Code",value:e?e.code:null},{type:"text",placeholder:"Unión",value:e?e.union:null}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Crear Proyecto",role:"confirm"}]});await s.present();const{role:c,data:t}=await s.onDidDismiss();if(c=="confirm"){const i={name:t.values[0],code:t.values[1],union:t.values[2]};y.post("/projects",i).then(u=>{r.create({header:"¡Éxito!",message:"Proyecto creado exitosamente",buttons:["OK"]}).then(async n=>{await n.present(),await n.onDidDismiss(),p()})}).catch(u=>{r.create({header:"Oops...",message:u.response.message,buttons:["OK"]}).then(async n=>{await n.present(),await n.onDidDismiss(),w(i)})})}},k=async e=>{await y.delete("/projects/".concat(e.id)),p(),J.create({message:"Proyecto eliminado con exito!",duration:2e3}).then(s=>{s.present()})},D=async e=>{await z.create({header:"Opciones",buttons:[{text:"Editar",handler:()=>{g(e)}},{text:"Eliminar",role:"destructive",handler:()=>{k(e)}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]}).then(s=>{s.present()})},g=async e=>{const s=await r.create({header:"Editar Proyecto",inputs:[{type:"text",placeholder:"Name",value:e.name},{type:"text",placeholder:"Code",value:e.code},{type:"text",placeholder:"Unión",value:e.union}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Guardar proyecto",role:"confirm"}]});await s.present();const{role:c,data:t}=await s.onDidDismiss();if(c=="confirm"){const i={id:e.id,name:t.values[0],code:t.values[1],union:t.values[2]};y.patch("/projects/"+e.id,i).then(u=>{r.create({header:"¡Éxito!",message:"Proyecto guardado exitosamente",buttons:["OK"]}).then(async n=>{await n.present(),await n.onDidDismiss(),p()})}).catch(u=>{r.create({header:"Oops...",message:u.response.message,buttons:["OK"]}).then(async n=>{await n.present(),await n.onDidDismiss(),g(e)})})}};return p(),(e,s)=>{const c=N("ion-button");return d(),h(a(U),{ref_key:"page",ref:I},{default:o(()=>[l(a(T),null,{default:o(()=>[l(a(O),null,{default:o(()=>[l(a(C),{slot:"start"},{default:o(()=>[l(a(K),{"default-href":"/"})]),_:1}),l(a(L),null,{default:o(()=>[E("Projects")]),_:1}),m.value?(d(),h(a(V),{key:0,type:"indeterminate"})):P("",!0),l(a(C),{slot:"end"},{default:o(()=>[l(c,{onClick:w},{default:o(()=>[l(a(j),{icon:a(R)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),l(a(S),null,{default:o(()=>[m.value?P("",!0):(d(),h(a(A),{key:0},{default:o(()=>[(d(!0),F(H,null,G(_.value,t=>(d(),h(a($),{key:t.id,onClick:i=>D(t),button:""},{default:o(()=>[l(a(q),null,{default:o(()=>[f("h2",null,[f("b",null,x(t.name),1)]),f("p",null,x(t.code),1),f("p",null,x(t.union),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))]),_:1})]),_:1},512)}}});export{W as default};
