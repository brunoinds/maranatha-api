import{d as A,r as d,B as L,c as s,w as o,u as e,R as m,S as y,o as n,a,b as S,h as T,g as I,i as J,j as r,I as B,l as N,m as c,V,s as u,v as l,N as k,F as x,W as D,k as M,y as R}from"./index-1391b99f.js";import{J as E,P as q}from"./JobsAndProjects-9c5d466d.js";const F=l("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1),H=l("h2",null,"Modificar Jobs",-1),W=l("h2",null,"Modificar Proyectos",-1),z=l("h2",null,"Append Default Jobs and Projects",-1),Q=A({__name:"Account",setup(G){const f=d(null),_=d(!0),p=L(),v=d(null),i=d(!1),g=()=>{p.replace("/login")},b=()=>{p.push("/jobs")},C=()=>{p.push("/projects")},j=async()=>{f.value=await m.get("/account/me"),_.value=!1;const t=await y.getCurrentSession();t&&(i.value=t.roles().includes("admin"))},P=async()=>{y.getCurrentSession().then(async t=>{t||g(),t.logout().then(()=>{g()}).catch(h=>{console.error(h)})})},w=async()=>{E.forEach(async t=>{await m.post("/jobers",t)}),q.forEach(async t=>{await m.post("/projects",t)})};return j(),(t,h)=>(n(),s(e(R),{ref_key:"page",ref:v},{default:o(()=>[a(e(B),null,{default:o(()=>[a(e(S),null,{default:o(()=>[a(e(T),null,{default:o(()=>[I("Mi cuenta")]),_:1}),_.value?(n(),s(e(J),{key:0,type:"indeterminate"})):r("",!0)]),_:1})]),_:1}),a(e(M),null,{default:o(()=>[_.value?r("",!0):(n(),s(e(N),{key:0},{default:o(()=>[a(e(c),null,{default:o(()=>[a(e(V),{slot:"start"},{default:o(()=>[F]),_:1}),a(e(u),null,{default:o(()=>[l("h2",null,k(f.value.name),1),l("p",null,k(f.value.email),1)]),_:1})]),_:1}),i.value?(n(),s(e(c),{key:0,onClick:b,button:""},{default:o(()=>[a(e(u),{color:"primary"},{default:o(()=>[H]),_:1})]),_:1})):r("",!0),i.value?(n(),s(e(c),{key:1,onClick:C,button:""},{default:o(()=>[a(e(u),{color:"primary"},{default:o(()=>[W]),_:1})]),_:1})):r("",!0),i.value?(n(),s(e(c),{key:2,onClick:w,button:""},{default:o(()=>[a(e(u),{color:"warning"},{default:o(()=>[z]),_:1})]),_:1})):r("",!0),a(e(c),{onClick:P},{default:o(()=>[a(e(x),{color:"danger",icon:e(D),slot:"start"},null,8,["icon"]),a(e(u),{color:"danger"},{default:o(()=>[I("Terminar sesiÃ³n")]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1},512))}});export{Q as default};
