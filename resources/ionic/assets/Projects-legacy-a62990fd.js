System.register(["./index-legacy-23fb27d0.js"],(function(e,t){"use strict";var a,n,l,o,s,r,c,i,u,d,p,h,m,y,f,v,x,w,g,_,D,b,C,k,j,P,O,K,N,E,G,U,z;return{setters:[e=>{a=e.d,n=e.r,l=e.B,o=e.af,s=e.c,r=e.w,c=e.u,i=e.R,u=e.o,d=e.a,p=e.b,h=e.e,m=e.a6,y=e.h,f=e.g,v=e.i,x=e.j,w=e.F,g=e.G,_=e.I,D=e.l,b=e.H,C=e.L,k=e.K,j=e.k,P=e.y,O=e.z,K=e.m,N=e.s,E=e.v,G=e.N,U=e.ax,z=e.A}],execute:function(){e("default",a({__name:"Projects",setup(e){const t=n([]),a=n(!0);l();const A=n(null),B=async()=>{a.value=!0,t.value=await i.get("/projects"),a.value=!1},F=async(e=null)=>{const t=await O.create({header:"Nuevo Proyecto",inputs:[{type:"text",placeholder:"Name",value:e?e.name:null},{type:"text",placeholder:"Code",value:e?e.code:null},{type:"text",placeholder:"Unión",value:e?e.union:null}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Crear Proyecto",role:"confirm"}]});await t.present();const{role:a,data:n}=await t.onDidDismiss();if("confirm"==a){const e={name:n.values[0],code:n.values[1],union:n.values[2]};i.post("/projects",e).then((e=>{O.create({header:"¡Éxito!",message:"Proyecto creado exitosamente",buttons:["OK"]}).then((async e=>{await e.present(),await e.onDidDismiss(),B()}))})).catch((t=>{O.create({header:"Oops...",message:t.response.message,buttons:["OK"]}).then((async t=>{await t.present(),await t.onDidDismiss(),F(e)}))}))}},H=async e=>{await U.create({header:"Opciones",buttons:[{text:"Editar",handler:()=>{I(e)}},{text:"Eliminar",role:"destructive",handler:()=>{(async e=>{await i.delete(`/projects/${e.id}`),B(),z.create({message:"Proyecto eliminado con exito!",duration:2e3}).then((e=>{e.present()}))})(e)}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]}).then((e=>{e.present()}))},I=async e=>{const t=await O.create({header:"Editar Proyecto",inputs:[{type:"text",placeholder:"Name",value:e.name},{type:"text",placeholder:"Code",value:e.code},{type:"text",placeholder:"Unión",value:e.union}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Guardar proyecto",role:"confirm"}]});await t.present();const{role:a,data:n}=await t.onDidDismiss();if("confirm"==a){const t={id:e.id,name:n.values[0],code:n.values[1],union:n.values[2]};i.patch("/projects/"+e.id,t).then((e=>{O.create({header:"¡Éxito!",message:"Proyecto guardado exitosamente",buttons:["OK"]}).then((async e=>{await e.present(),await e.onDidDismiss(),B()}))})).catch((t=>{O.create({header:"Oops...",message:t.response.message,buttons:["OK"]}).then((async t=>{await t.present(),await t.onDidDismiss(),I(e)}))}))}};return B(),(e,n)=>{const l=o("ion-button");return u(),s(c(P),{ref_key:"page",ref:A},{default:r((()=>[d(c(_),null,{default:r((()=>[d(c(p),null,{default:r((()=>[d(c(h),{slot:"start"},{default:r((()=>[d(c(m),{"default-href":"/"})])),_:1}),d(c(y),null,{default:r((()=>[f("Projects")])),_:1}),a.value?(u(),s(c(v),{key:0,type:"indeterminate"})):x("",!0),d(c(h),{slot:"end"},{default:r((()=>[d(l,{onClick:F},{default:r((()=>[d(c(w),{icon:c(g)},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),d(c(j),null,{default:r((()=>[a.value?x("",!0):(u(),s(c(D),{key:0},{default:r((()=>[(u(!0),b(k,null,C(t.value,(e=>(u(),s(c(K),{key:e.id,onClick:t=>H(e),button:""},{default:r((()=>[d(c(N),null,{default:r((()=>[E("h2",null,[E("b",null,G(e.name),1)]),E("p",null,G(e.code),1),E("p",null,G(e.union),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}))])),_:1})])),_:1},512)}}}))}}}));
