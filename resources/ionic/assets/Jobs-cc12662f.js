import{d as J,r as b,B,af as N,c as h,w as n,u as a,R as f,o as u,a as l,b as O,e as w,a6 as K,h as L,g as P,i as E,j as g,F as V,G as R,I as T,l as A,H as F,L as G,K as H,k as S,y as $,z as r,m as q,s as z,v as _,N as C,ax as M,A as Q}from"./index-1391b99f.js";const X=J({__name:"Jobs",setup(U){const x=b([]),m=b(!0);B();const I=b(null),p=async()=>{m.value=!0,x.value=await f.get("/jobers"),m.value=!1},y=async(e=null)=>{const s=await r.create({header:"Nuevo Job",inputs:[{type:"text",placeholder:"Name",value:e?e.name:null},{type:"text",placeholder:"Code",value:e?e.code:null}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Crear Job",role:"confirm"}]});await s.present();const{role:c,data:o}=await s.onDidDismiss();if(c=="confirm"){const i={name:o.values[0],code:o.values[1]};f.post("/jobers",i).then(d=>{r.create({header:"¡Éxito!",message:"Job creado exitosamente",buttons:["OK"]}).then(async t=>{await t.present(),await t.onDidDismiss(),p()})}).catch(d=>{r.create({header:"Oops...",message:d.response.message,buttons:["OK"]}).then(async t=>{await t.present(),await t.onDidDismiss(),y(i)})})}},k=async e=>{await f.delete("/jobers/".concat(e.id)),p(),Q.create({message:"Job eliminado con exito!",duration:2e3}).then(s=>{s.present()})},D=async e=>{await M.create({header:"Opciones",buttons:[{text:"Editar",handler:()=>{v(e)}},{text:"Eliminar",role:"destructive",handler:()=>{k(e)}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]}).then(s=>{s.present()})},v=async e=>{const s=await r.create({header:"Editar Job",inputs:[{type:"text",placeholder:"Name",value:e.name},{type:"text",placeholder:"Code",value:e.code}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Guardar Job",role:"confirm"}]});await s.present();const{role:c,data:o}=await s.onDidDismiss();if(c=="confirm"){const i={id:e.id,name:o.values[0],code:o.values[1]};f.patch("/jobers/"+e.id,i).then(d=>{r.create({header:"¡Éxito!",message:"Job guardado exitosamente",buttons:["OK"]}).then(async t=>{await t.present(),await t.onDidDismiss(),p()})}).catch(d=>{r.create({header:"Oops...",message:d.response.message,buttons:["OK"]}).then(async t=>{await t.present(),await t.onDidDismiss(),v(e)})})}};return p(),(e,s)=>{const c=N("ion-button");return u(),h(a($),{ref_key:"page",ref:I},{default:n(()=>[l(a(T),null,{default:n(()=>[l(a(O),null,{default:n(()=>[l(a(w),{slot:"start"},{default:n(()=>[l(a(K),{"default-href":"/"})]),_:1}),l(a(L),null,{default:n(()=>[P("Jobs")]),_:1}),m.value?(u(),h(a(E),{key:0,type:"indeterminate"})):g("",!0),l(a(w),{slot:"end"},{default:n(()=>[l(c,{onClick:y},{default:n(()=>[l(a(V),{icon:a(R)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),l(a(S),null,{default:n(()=>[m.value?g("",!0):(u(),h(a(A),{key:0},{default:n(()=>[(u(!0),F(H,null,G(x.value,o=>(u(),h(a(q),{key:o.id,onClick:i=>D(o),button:""},{default:n(()=>[l(a(z),null,{default:n(()=>[_("h2",null,[_("b",null,C(o.name),1)]),_("p",null,C(o.code),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))]),_:1})]),_:1},512)}}});export{X as default};
