System.register(["./index-legacy-23fb27d0.js"],(function(e,t){"use strict";var a,n,s,l,o,r,i,c,u,d,m,h,p,f,b,y,x,v,w,g,_,D,C,k,J,O,j,K,N,E,G,z,A;return{setters:[e=>{a=e.d,n=e.r,s=e.B,l=e.af,o=e.c,r=e.w,i=e.u,c=e.R,u=e.o,d=e.a,m=e.b,h=e.e,p=e.a6,f=e.h,b=e.g,y=e.i,x=e.j,v=e.F,w=e.G,g=e.I,_=e.l,D=e.H,C=e.L,k=e.K,J=e.k,O=e.y,j=e.z,K=e.m,N=e.s,E=e.v,G=e.N,z=e.ax,A=e.A}],execute:function(){e("default",a({__name:"Jobs",setup(e){const t=n([]),a=n(!0);s();const B=n(null),F=async()=>{a.value=!0,t.value=await c.get("/jobers"),a.value=!1},H=async(e=null)=>{const t=await j.create({header:"Nuevo Job",inputs:[{type:"text",placeholder:"Name",value:e?e.name:null},{type:"text",placeholder:"Code",value:e?e.code:null}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Crear Job",role:"confirm"}]});await t.present();const{role:a,data:n}=await t.onDidDismiss();if("confirm"==a){const e={name:n.values[0],code:n.values[1]};c.post("/jobers",e).then((e=>{j.create({header:"¡Éxito!",message:"Job creado exitosamente",buttons:["OK"]}).then((async e=>{await e.present(),await e.onDidDismiss(),F()}))})).catch((t=>{j.create({header:"Oops...",message:t.response.message,buttons:["OK"]}).then((async t=>{await t.present(),await t.onDidDismiss(),H(e)}))}))}},I=async e=>{await z.create({header:"Opciones",buttons:[{text:"Editar",handler:()=>{L(e)}},{text:"Eliminar",role:"destructive",handler:()=>{(async e=>{await c.delete(`/jobers/${e.id}`),F(),A.create({message:"Job eliminado con exito!",duration:2e3}).then((e=>{e.present()}))})(e)}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]}).then((e=>{e.present()}))},L=async e=>{const t=await j.create({header:"Editar Job",inputs:[{type:"text",placeholder:"Name",value:e.name},{type:"text",placeholder:"Code",value:e.code}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Guardar Job",role:"confirm"}]});await t.present();const{role:a,data:n}=await t.onDidDismiss();if("confirm"==a){const t={id:e.id,name:n.values[0],code:n.values[1]};c.patch("/jobers/"+e.id,t).then((e=>{j.create({header:"¡Éxito!",message:"Job guardado exitosamente",buttons:["OK"]}).then((async e=>{await e.present(),await e.onDidDismiss(),F()}))})).catch((t=>{j.create({header:"Oops...",message:t.response.message,buttons:["OK"]}).then((async t=>{await t.present(),await t.onDidDismiss(),L(e)}))}))}};return F(),(e,n)=>{const s=l("ion-button");return u(),o(i(O),{ref_key:"page",ref:B},{default:r((()=>[d(i(g),null,{default:r((()=>[d(i(m),null,{default:r((()=>[d(i(h),{slot:"start"},{default:r((()=>[d(i(p),{"default-href":"/"})])),_:1}),d(i(f),null,{default:r((()=>[b("Jobs")])),_:1}),a.value?(u(),o(i(y),{key:0,type:"indeterminate"})):x("",!0),d(i(h),{slot:"end"},{default:r((()=>[d(s,{onClick:H},{default:r((()=>[d(i(v),{icon:i(w)},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),d(i(J),null,{default:r((()=>[a.value?x("",!0):(u(),o(i(_),{key:0},{default:r((()=>[(u(!0),D(k,null,C(t.value,(e=>(u(),o(i(K),{key:e.id,onClick:t=>I(e),button:""},{default:r((()=>[d(i(N),null,{default:r((()=>[E("h2",null,[E("b",null,G(e.name),1)]),E("p",null,G(e.code),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}))])),_:1})])),_:1},512)}}}))}}}));
